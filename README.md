# Бесплатная библиотека научной фантастики с tululu.org

Проект представляет собой сайт-агрегатор книг в области научной фантастики с сайта https://tululu.org/, а также набор скриптов для скачивания книг с него.

Рабочая версия сайта из репозитория по [ссылке](https://dmitriev-ilya.github.io/library/pages/index1.html).

![image](https://user-images.githubusercontent.com/67222917/229307066-98cb5454-98c8-4545-9429-ef1f2be45447.png)


## Как установить

Скачать файлы репозитория.

Python3 должен быть уже установлен. 
Затем используйте `pip` для установки зависимостей:
```
pip install -r requirements.txt
```

## Запуск сайта

Для запуска сайта-библиотеки на локальном сервере необходимо запустить скрипт `render_website.py`:
```bash
$python3 render_website.py
```

В адресной строке браузера перейти по адресу `http://127.0.0.1:5500`.

Для работы сайта на локальном сервере необходимо с помощью скрипта `parse_tululu_category.py` скачать электронную библиотеку книг (подробнее о работе скрипта читай ниже).

## Использование скриптов

### main.py

При запуске скачивает книги, обложки, а также основные данные о книге (заголовок, автор, отзывы, жанр и т.д.) в виде словаря в заданном диапазоне ID книг.

Пример запуска:
```bash
$python3 main.py
```

При запуске все обложки будут по умолчанию помещены в папку `images/`, а книги - в `books/`, скрипт создаст их при необходимости.

Скрипт также принимает опциональные аргументы  в консоли:
* `-s`, `--start_id` - id книги с которой начинается диапазон скачивания (по умолчанию 1)
* `-e`, `--end_id` - id книги которым заканчивается диапазон скачивания (по умолчанию 10)

Например:
```bash
$python3 main.py -s 1 -e 12
```
Прогресс скачивания отображается в консоли:

![image](https://user-images.githubusercontent.com/67222917/221357826-0c022d36-78a8-43a6-a897-0ad22017c878.png)

### parse_tululu_category.py

При запуске скачивает **ВСЕ** книги, обложки, а также основные данные о книге (заголовок, автор, отзывы, жанр и т.д.) в виде JSON-файла из категории "Научная фантастика".

Пример запуска:
```bash
$python3 parse_tululu_category.py
```

При запуске все обложки будут по умолчанию помещены в папку `images/`, а книги - в `books/`, скрипт создаст их при необходимости.

Скрипт также принимает опциональные аргументы  в консоли:
* `-s`, `--start_page` - номер страницы сайта с которой начинается парсинг (по умолчанию 1)
* `-e`, `--end_page` - номер страницы сайта на которой заканчивается парсинг (по умолчанию -все оставшиеся страницы в категории)
* `-s_i`, `--skip_imgs` - не скачивать картинки
* `-s_t`, `--skip_txt` - не скачивать текст книг
* `-j`, `--json_path` - путь к файлу .json для записи информации о книгах
* `-f`, `--dest_folder` - путь к каталогу с результатами парсинга: картинкам, книгам, JSON

Например:
```bash
$python3 parse_tululu_category.py -s 1 -e 4 s_i
```
В данном примере, скрипт скачает все книги с 1-й по 4-ю страницу сайта в категории "Научная фантастика", при этом картинки скачаны не будут.

Прогресс скачивания отображается в консоли, как и в примере выше.
